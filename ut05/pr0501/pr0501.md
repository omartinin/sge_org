# PR0501

## 1. Creación de la base del módulo
- Introducimos el comando `docker exec -ti id_contenedor bash`
- veremos el prompt de bash, donde introduciremos odoo scaffold gestion_de_salas /mnt/extra-addons/

## 2. Personalización del módulo
- Accedemos al archivo `__manyfest__.py` y descomentamos la linea de security en la entrada `data` del diccionario:
    ```
    'data': [
        'security/ir.model.access.csv',
        'views/views.xml',
        'views/templates.xml',
    ],
    ```
- Modificamos el archivo `models.py` para que contenga las variables adecuadas de la view asociada a **salas disponibles**:
    ```
    # -*- coding: utf-8 -*-

    from odoo import models, fields, api


    class gestion_de_salas(models.Model):
        _name = 'gestion_de_salas.gestion_de_salas'
        _description = 'gestion_de_salas.gestion_de_salas'

        nombre_de_la_sala = fields.Char()
        capacidad = fields.Integer()
        fecha_de_reserva = fields.Date()
        reservada = fields.Boolean()
        comentarios = fields.Char()
    ```
- Modificamos el archivo views.xml para que se corresponda con la estructura de los menús y acciones:
    ```
    <odoo>
        <data>
            <!-- explicit list view definition -->

            <record model="ir.ui.view" id="gestion_de_salas.list">
            <field name="name">gestion_de_salas list</field>
            <field name="model">gestion_de_salas.gestion_de_salas</field>
            <field name="arch" type="xml">
                <tree>
                <field name="nombre_de_la_sala"/>
                <field name="capacidad"/>
                <field name="fecha_de_reserva"/>
                <field name="reservada"/>
                <field name="comentarios"/>
                </tree>
            </field>
            </record>


            <!-- actions opening views on models -->

            <record model="ir.actions.act_window" id="gestion_de_salas.action_window">
            <field name="name">gestion_de_salas window</field>
            <field name="res_model">gestion_de_salas.gestion_de_salas</field>
            <field name="view_mode">tree,form</field>
            </record>


            <!-- server action to the one above -->

            <!-- <record model="ir.actions.server" id="gestion_de_salas.action_server">
            <field name="name">gestion_de_salas server</field>
            <field name="model_id" ref="model_gestion_de_salas_gestion_de_salas"/>
            <field name="state">code</field>
            <field name="code">
                action = {
                "type": "ir.actions.act_window",
                "view_mode": "tree,form",
                "res_model": model._name,
                }
            </field>
            </record> -->


            <!-- Top menu item -->

            <menuitem name="gestion_de_salas" id="gestion_de_salas.menu_root"/>

            <!-- menu categories -->

            <menuitem name="Salas" id="gestion_de_salas.salas" parent="gestion_de_salas.menu_root"/>
            <menuitem name="Reservas" id="gestion_de_salas.reservas" parent="gestion_de_salas.menu_root"/>

            <!-- actions -->

            <menuitem name="Salas disponibles" id="gestion_de_salas.salas_list" parent="gestion_de_salas.salas"
                    action="gestion_de_salas.action_window"/>
            <menuitem name="reservas-realizadas" id="gestion_de_salas.reservas_null" parent="gestion_de_salas.reservas"/>

        </data>
    </odoo>
    ```
## 3. Capturas
- [Mi captura](./capturas/captura1.png)