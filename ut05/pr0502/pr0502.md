# PR0502

## 1. Personalización del módulo

- Creamos las views:

    `library_autor.py`
    ```
    # -*- coding: utf-8 -*-

    from odoo import models, fields, api


    class gestion_de_biblioteca_autor(models.Model):
        _name = 'gestion_de_biblioteca.library_autor'
        _description = 'gestion_de_biblioteca.library_autor'

        nombre = fields.Char()
        fechanac = fields.Date()
        biografia = fields.Text()
        libros = fields.Text()
    ```

    `library_libro.py`
    ```
    # -*- coding: utf-8 -*-

    from odoo import models, fields, api


    class gestion_de_biblioteca_libro(models.Model):
        _name = 'gestion_de_biblioteca.library_libro'
        _description = 'gestion_de_biblioteca.library_libro'

        nombre = fields.Char()
        autor = fields.Char()
        fechapub = fields.Date()
        isbn = fields.Integer()
        sinopsis = fields.Text()
    ```

- Importamos los modelos:

    `__init__.py`
    ```
    # -*- coding: utf-8 -*-

    from . import library_libro
    from . import library_autor
    ```

- Creamos las views:
  
    `autor_view.py`
    ```
    <odoo>      
        <data>
            <record model="ir.ui.view" id="gestion_de_biblioteca.list">
                <field name="name">Autores</field>
                <field name="model">gestion_de_biblioteca.library_autor</field>
                <field name="arch" type="xml">
                <tree>
                    <field name="nombre"/>
                    <field name="fechanac"/>
                    <field name="biografia"/>
                    <field name="libros"/>
                </tree>
                </field>
            </record>

            <record model="ir.actions.act_window" id="gestion_de_biblioteca.action_autores">
                <field name="name">Autores</field>
                <field name="res_model">gestion_de_biblioteca.library_autor</field>
                <field name="view_mode">tree,form</field>
            </record>
        </data>
    </odoo>  
    ```

    `libro_view.py`
    ```
    <odoo>      
        <data>
            <record model="ir.ui.view" id="gestion_de_biblioteca.list">
                <field name="name">Libros</field>
                <field name="model">gestion_de_biblioteca.library_libro</field>
                <field name="arch" type="xml">
                    <tree>
                    <field name="nombre"/>
                    <field name="autor"/>
                    <field name="fechapub"/>
                    <field name="isbn"/>
                    <field name="sinopsis"/>
                    </tree>
                </field>
            </record>

            <record model="ir.actions.act_window" id="gestion_de_biblioteca.action_libros">
                <field name="name">Libros</field>
                <field name="res_model">gestion_de_biblioteca.library_libro</field>
                <field name="view_mode">tree,form</field>
            </record>
        </data>
    </odoo>
    ```

    `menu_view.py`
    ```
    <odoo>
        <data>    
            <!-- Top menu item -->

            <menuitem name="gestion_de_biblioteca" id="gestion_de_biblioteca.menu_root"/>

            <!-- menu categories -->

            <menuitem name="Libros" id="gestion_de_biblioteca.libros" parent="gestion_de_biblioteca.menu_root"/>
            <menuitem name="Autores" id="gestion_de_biblioteca.autores" parent="gestion_de_biblioteca.menu_root"/>

            <!-- actions -->

            <menuitem name="Lista de libros" id="gestion_de_biblioteca.libros_list" parent="gestion_de_biblioteca.libros"
                    action="gestion_de_biblioteca.action_libros"/>
            <menuitem name="Lista de autores" id="gestion_de_biblioteca.autores_list" parent="gestion_de_biblioteca.autores"
                    action="gestion_de_biblioteca.action_autores"/>
        </data>
    </odoo>  
    ```

- Añadimos las views en el manifiesto:
  
    `__manifest__.py`
    ```
    # -*- coding: utf-8 -*-
    {
        'name': "gestion_de_biblioteca",

        'summary': """
            Short (1 phrase/line) summary of the module's purpose, used as
            subtitle on modules listing or apps.openerp.com""",

        'description': """
            Long description of module's purpose
        """,

        'author': "My Company",
        'website': "https://www.yourcompany.com",

        # Categories can be used to filter modules in modules listing
        # Check https://github.com/odoo/odoo/blob/16.0/odoo/addons/base/data/ir_module_category_data.xml
        # for the full list
        'category': 'Uncategorized',
        'version': '0.1',

        # any module necessary for this one to work correctly
        'depends': ['base'],

        # always loaded
        'data': [
            'security/ir.model.access.csv',
            'views/templates.xml',
            'views/autor_view.xml',
            'views/libro_view.xml',
            'views/menu_view.xml',
        ],
        # only loaded in demonstration mode
        'demo': [
            'demo/demo.xml',
        ],
    }
    ```

- Definimos los permisos de acceso a modelos:
  
    `ir.model.access.csv`
    ```
    id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
    access_gestion_de_biblioteca_library_libro,gestion_de_biblioteca.library_libro,model_gestion_de_biblioteca_library_libro,base.group_user,1,1,1,1
    access_gestion_de_biblioteca_library_autor,gestion_de_biblioteca.library_autor,model_gestion_de_biblioteca_library_autor,base.group_user,1,1,1,1

    ```

## 2. Capturas

- [Libro](./capturas/captura1.png)
- [Autor](./capturas/captura2.png)